### 3.共享程序集和强命名程序集

#### 3.1 两种程序集，两种部署

    CLR支持两种程序集：
        弱名称程序集(weakly named assembly)
        强名称程序集(strongly named assembly)

    相同之处：
        弱命名和强命名程序集结构完全相同。PE文件格式、PE32(+)头、CLR
        头、元数据、清单表以及IL。生成的工具也相同。

    不同之处：
        强命名程序集使用发布者的公钥/私钥进行了签名。这一对秘钥允许对程序集进行唯一性的表
        示、保护和版本控制，允许程序集部署到用户机器的任何地方，甚至可以部署到Internet
        上。由于程序集被唯一性的标识，所以当应用程序绑定到强命名程序集时，CLR可以应用一些
        已知安全的策略

    程序集可以采用两种方式部署：私有或全局。

    私有部署：
        私有部署的程序集是指部署到应用程序基目录或者某个子目录的程序集。
        弱命名程序集只能以私有方式部署
    
    全局部署
        全局部署的程序集是指部署到一些公认位置的程序集。CLR在查找程序集
        时，会检查这些位置。强命名程序集既可以私有部署，也可全局部署。

#### 3.2 为程序集分配强名称

    问题：
        要由多个应用程序访问的程序集必须放到公认的目录。两个（或多个）公司可能生成具有相同
        文件名的程序集。所以，假如两个程序集都复制到了相同的公认目录，最后一个安装的就是
        “老大”，造成正在使用旧程序集的所有应用程序都无法正常工作（这就是Windows"Dllhell"
        的由来，因为共享DLL全都复制到System32目录）。

    只根据文件名来区分程序集明显不够。CLR必须支持对程序集进行唯一性标识的机制，这就是所谓
    的“强命名程序集”。

    强命名程序集具有四个重要特性，他们共同对程序集进行唯一性标识：文件名、版本号、语言文化
    和公钥。由于公钥数字很大，所以经常使用从公钥派生的小哈希值，称为公钥标记。
    
    可用辅助类System.Reflection.AssemblyName轻松构造程序集名称，并获取程序集名称的各个
    组成部分。该类提供了几个公共实例属性，比如CultureInfo,FullName,KeyPair,Name，
    Version还提供了几个公共实例方法，比如GetPublicKey,GetPublicKeyToken,SetPublicKey
    和SetPublicKeyToken

    创建强命名程序集的第一步是用.NET Framework SDK和Microsoft Visual Studio随带的Stro
    ngName实用程序（SN.exe）获取秘钥。SN.exe允许通过多个命令行开关来使用一整套功能。所有
    命令行开关都区分大小写。

